<?php
set_time_limit(0);
include('my_twitter.php');


class twitterTalk extends MyTwitter{
	var $sleeptime = 60;
	var $twitted = array();

	function startTalking(){
		while(1){
			
			$this->checkTwitter();
			echo '

------------   Checking Next Batch Of Messages ---------------				
';
			sleep($this->sleeptime);
		}	
	}

	function checkTwitter(){
		$twits = $this->userTimeLine();
		foreach($twits as $twit){
			if (!in_array($twit['id'], $this->twitted)){
				//not been twitted

				if(ereg($this->getUsername(),$twit['text'])){

					$this->say($twit);
				}		
				
				//mark as twitted
				$this->twitted() = $twit['id'];
			} 
		}
	}

	function say($twit){
		$msg = $twit['user']['name'] . ' says '. $twit['text'];
		@exec('say '. $msg);
				echo $msg . '

';
	sleep(4);
	}
}


$twitterTalk = new twitterTalk('miamiphp','#duelcore55');
$twitterTalk->startTalking();
?>
